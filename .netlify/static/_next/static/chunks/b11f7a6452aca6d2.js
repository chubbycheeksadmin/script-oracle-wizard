(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let s=/^(INT|EXT|INT\/EXT|I\/E)[.\s]+(.+?)\s*[-â€“â€”]\s*(DAY|NIGHT|DUSK|DAWN|CONTINUOUS|LATER|SAME)/i,i=/^(INT|EXT|INT\/EXT|I\/E)[.\s]+(.+?)\s+(DAY|NIGHT|DUSK|DAWN)/i,r=/^(\d+[A-Z]?)[.\s]/,o=["crane","dolly","steadicam","drone","aerial","tracking shot","slow motion","slo-mo","high speed","motion control","technocrane","underwater","car mount","process trailer","green screen","blue screen"],n=["hero shot","product shot","pack shot","beauty shot","pour","splash","tabletop","macro","close-up on product","cu product"],l=["vfx","cgi","visual effects","composite","green screen","blue screen","removal","cleanup","rig removal","wire removal","digital","morph","transformation","animation","particles","3d","cg elements"],d=/^([A-Z][A-Z\s]+)(\s*\(.*?\))?$/m;function c(e){let t=e.match(s);if(t||(t=e.match(i)),!t)return null;let a=t[1].toUpperCase(),r="INT";"EXT"===a?r="EXT":("INT/EXT"===a||"I/E"===a)&&(r="INT/EXT");let o=t[2].trim(),n=t[3].toUpperCase(),l="DAY";return"NIGHT"===n?l="NIGHT":"DUSK"===n?l="DUSK":"DAWN"===n&&(l="DAWN"),{intExt:r,location:o,dayNight:l}}let u=1,p=1,h=1,m=10,g=8,x=4,y={totalDayMinutes:660,workingMinutes:600,lunchMinutes:60,turnoverMinutes:90,avgSetupMinutes:45,avgShotsPerSetup:3,avgSetupsPerDay:7,avgShotExecutionMinutes:40,avgResetMinutes:30,technicalSetupMinutes:75,technicalShotMinutes:60,companyMoveMinutes:60,companyMoveResetMinutes:45},b="Children under 5: max 5hrs on set, 2hrs performance",f="Children 9+: max 9.5hrs on set, 5hrs performance",v=3,w=6.5,N={lean:85e3,standard:11e4,ambitious:14e4},k={EU_Average:{country:"EU_Average",costPerDay:{lean:85e3,standard:11e4,ambitious:14e4},currency:"GBP",fxRate:1,fxBuffer:0,bufferedRate:1},Poland:{country:"Poland",costPerDay:{lean:9e4,standard:115e3,ambitious:145e3},currency:"PLN",fxRate:4.8422,fxBuffer:.02,bufferedRate:4.7454},Bulgaria:{country:"Bulgaria",costPerDay:{lean:7e4,standard:95e3,ambitious:12e4},currency:"BGN",fxRate:2.2485,fxBuffer:.02,bufferedRate:2.2035},Czech:{country:"Czech",costPerDay:{lean:95e3,standard:12e4,ambitious:15e4},currency:"CZK",fxRate:27.967,fxBuffer:.02,bufferedRate:27.4077},Serbia:{country:"Serbia",costPerDay:{lean:65e3,standard:9e4,ambitious:115e3},currency:"RSD",fxRate:134.96,fxBuffer:.03,bufferedRate:130.9112},Georgia:{country:"Georgia",costPerDay:{lean:6e4,standard:85e3,ambitious:11e4},currency:"GEL",fxRate:3.6181,fxBuffer:.03,bufferedRate:3.5096},Spain:{country:"Spain",costPerDay:{lean:105e3,standard:13e4,ambitious:165e3},currency:"EUR",fxRate:1.2,fxBuffer:.03,bufferedRate:1.236},Portugal:{country:"Portugal",costPerDay:{lean:95e3,standard:115e3,ambitious:145e3},currency:"EUR",fxRate:1.2,fxBuffer:.03,bufferedRate:1.236}},S={dayRate:12e3,dayRateLean:1e4,dayRateStandard:12e3,dayRateAmbitious:14e3,prepDays:0},j={dayRate:8e3,prepDays:0},D={dayRate:3e3,prepDays:5,travelDays:2},C={dayRate:900,prepDays:5,travelDays:2},M={dayRate:900,prepDays:5,travelDays:2},$={dayRate:850,prepDays:6,travelDays:2,needsAssistant:!0,assistantDayRate:500},P={flightPerPerson:{lean:500,standard:750,ambitious:1e3},hotelPerNight:{lean:180,standard:250,ambitious:350},perDiemPerDay:100},E={casting:{lean:5e3,standard:8e3,ambitious:12e3},storyboards:{lean:3e3,standard:5e3,ambitious:8e3},wardrobeSourcing:{lean:5e3,standard:8e3,ambitious:15e3},officeAdmin:{lean:2e3,standard:3e3,ambitious:5e3}},B={baseRate:.025,minimum:1e4,maximum:18e3},T={lean:18e4,standard:215e3,ambitious:25e4},R=12e4,L=18e4,A={UK:{principalFeatured:{lean:4500,standard:5e3,ambitious:5500},secondaryFeatured:{lean:2700,standard:3e3,ambitious:3300},hero:{lean:4500,standard:5e3,ambitious:5500},featured:{lean:2700,standard:3e3,ambitious:3300}},US:{principalFeatured:{lean:7e3,standard:8e3,ambitious:9e3},secondaryFeatured:{lean:4500,standard:5e3,ambitious:5500},hero:{lean:7e3,standard:8e3,ambitious:9e3},featured:{lean:4500,standard:5e3,ambitious:5500}},Worldwide:{principalFeatured:{lean:1e4,standard:12e3,ambitious:14e3},secondaryFeatured:{lean:6e3,standard:7500,ambitious:9e3},hero:{lean:1e4,standard:12e3,ambitious:14e3},featured:{lean:6e3,standard:7500,ambitious:9e3}}};function U(e,t=y){return((e.technicalComplexity||e.heroProductMoment?t.technicalShotMinutes:t.avgShotExecutionMinutes)+t.avgResetMinutes)*e.estimatedShots}function I(e=y){return e.workingMinutes-e.turnoverMinutes}function F(e){return Math.max(0,new Set(e.map(e=>e.locationName.toLowerCase().trim())).size-1)}function q(e,t,a,s=y){let i=I(s),r=[],o=0,n=0,l=0,d=0;t.forEach(e=>{let t=U(e,s);o+=t,n+=e.estimatedShots,e.technicalComplexity&&l++,e.heroProductMoment&&d++});let c=a*(s.companyMoveMinutes+s.companyMoveResetMinutes);o+=c;let u=t.some(e=>"INT"===e.intExt||"INT/EXT"===e.intExt),p=t.some(e=>"EXT"===e.intExt||"INT/EXT"===e.intExt);u&&p&&(o+=30,r.push("INT/EXT mix requires lighting resets"));let h=t.some(e=>"DAY"===e.dayNight||"DAWN"===e.dayNight),m=t.some(e=>"NIGHT"===e.dayNight||"DUSK"===e.dayNight);h&&m&&r.push("DAY/NIGHT mix limits shooting window"),a>=2&&r.push(`${a} company moves add ${c} mins overhead`),l>=2&&r.push(`${l} technical shots competing for time`),d>=2&&r.push(`${d} hero product moments need careful scheduling`),n>7&&r.push(`${n} shots is aggressive for one day`);let g=Math.max(0,o-i),x=g>0;if(x){let e=(g/60).toFixed(1);r.push(`Schedule overrun: ${e}h beyond 10hr working day`)}return{dayNumber:e,scenes:t,shots:n,totalMinutesRequired:o,availableMinutes:i,overrunMinutes:g,companyMoves:a,isOverloaded:x,pressurePoints:r}}let H=[{id:"schedule-overload",description:"Schedule day overload check",category:"schedule",condition:(e,t)=>!!t&&t.days.some(e=>e.isOverloaded),scoreDelta:1.5,generateFlag:(e,t)=>({ruleId:"schedule-overload",title:"Schedule overload",explanation:`${t?.days.filter(e=>e.isOverloaded).length||0} day(s) exceed available working time. Simulated minutes required exceeds 10-hour working day.`,challenge:"Review shot list and consider adding shoot days or reducing scope per day.",category:"schedule",severity:"high"})},{id:"company-moves-excessive",description:"Excessive company moves per day",category:"schedule",condition:(e,t)=>t?t.days.some(e=>e.companyMoves>=3):(e.companyMovesPerDay||0)>=3,scoreDelta:1.2,generateFlag:(e,t)=>({ruleId:"company-moves-excessive",title:"Company move overtime risk",explanation:`â‰¥3 company moves on one or more days. Each move costs ~105 mins (60 travel + 45 reset).`,challenge:"Consolidate locations or add travel days. Consider if all locations are essential.",category:"schedule",severity:"medium"})},{id:"int-ext-mix",description:"Heavy INT/EXT mix within day",category:"schedule",condition:e=>e.interiorExteriorMix,scoreDelta:.8,generateFlag:()=>({ruleId:"int-ext-mix",title:"Lighting reset inefficiency",explanation:"Mixing interior and exterior within same day requires significant lighting resets.",challenge:"Group INT and EXT scenes on separate days where possible.",category:"schedule",severity:"low"})},{id:"hero-shots-competing",description:"Multiple hero/technical shots on same day",category:"schedule",condition:(e,t)=>t?t.days.some(e=>e.scenes.filter(e=>e.technicalComplexity).length+e.scenes.filter(e=>e.heroProductMoment).length>=2):e.complexity.technical&&e.complexity.heroProduct,scoreDelta:1,generateFlag:()=>({ruleId:"hero-shots-competing",title:"Hero shots competing for time",explanation:"Multiple technical or hero product shots scheduled on same day. Each requires minimum 60 mins execution.",challenge:"Spread hero/technical shots across days or allow more time per day.",category:"schedule",severity:"medium"})},{id:"inputs-incomplete",description:"Critical input fields missing",category:"schedule",condition:e=>{let t=0;return(!e.scriptBreakdown||0===e.scriptBreakdown.scenes.length)&&t++,!e.proposedShootDays&&t++,!e.budgetSnapshot.productionBudget&&!e.budgetSnapshot.totalBudget&&t++,!e.deliverables.tvc30&&!e.deliverables.tvc15&&!e.deliverables.socialCutdowns&&t++,void 0===e.companyMovesPerDay&&t++,t>=3},scoreDelta:.8,generateFlag:()=>({ruleId:"inputs-incomplete",title:"Inputs incomplete; risk understated",explanation:"â‰¥3 critical fields are blank. Assessment confidence is reduced.",challenge:"Provide script breakdown, proposed shoot days, and budget snapshot for accurate assessment.",category:"schedule",severity:"medium"})},{id:"complexity-days-mismatch",description:"High complexity with insufficient days",category:"creative",condition:e=>(e.complexity.technical||e.complexity.vfxHeavy||e.complexity.multipleHeroTalent)&&2>=(e.proposedShootDays||1),scoreDelta:1.2,generateFlag:e=>({ruleId:"complexity-days-mismatch",title:"Complexity vs days mismatch",explanation:`High complexity flagged but only ${e.proposedShootDays||1} shoot day(s) proposed.`,challenge:"Either add shoot days or descope complexity requirements.",category:"creative",severity:"high"})},{id:"setup-density-high",description:"Setup density too high",category:"creative",condition:(e,t)=>!!t&&t.avgShotsPerDay>8,scoreDelta:1,generateFlag:(e,t)=>({ruleId:"setup-density-high",title:"Setup density too high",explanation:`Average ${t?.avgShotsPerDay.toFixed(1)} setups/day. A setup is a camera/lighting configuration - multiple shots can share the same setup. Target 6-8 setups/day.`,challenge:"Add shoot days or consolidate setups. Review if all camera positions are essential.",category:"creative",severity:"medium"})},{id:"post-underscoped",description:"Post likely under-scoped",category:"post",condition:e=>{let t=+!!e.deliverables.tvc30+ +!!e.deliverables.tvc15+ +!!e.deliverables.socialCutdowns>=2,a=e.budgetSnapshot.postBudget||0;return t&&a<13e4},scoreDelta:1,generateFlag:()=>({ruleId:"post-underscoped",title:"Post likely under-scoped if not explicit",explanation:"Multiple deliverables (TVC + social + cutdowns) require significant post work.",challenge:"Ensure post budget covers online, grade, sound, music for all versions. Minimum Â£130k.",category:"post",severity:"medium"})},{id:"versioning-load",description:"9:16 versions increase post load",category:"post",condition:e=>e.deliverables.vertical916,scoreDelta:1,generateFlag:()=>({ruleId:"versioning-load",title:"Versioning load",explanation:"9:16 vertical versions require reframing and often re-editing. Not just a resize.",challenge:"Budget additional post time for vertical versions. May need dedicated shooting coverage.",category:"post",severity:"medium"})},{id:"fix-in-post-crutch",description:"Post being used as a crutch",category:"post",condition:e=>e.complexity.fixInPost,scoreDelta:.7,generateFlag:()=>({ruleId:"fix-in-post-crutch",title:"Post used as a crutch",explanation:'"We\'ll fix it in post" is flagged. This often leads to scope creep and budget overruns.',challenge:"Identify specific items to be fixed in post and budget accordingly. Better to get it right on set.",category:"post",severity:"low"})},{id:"vfx-scope-creep",description:"VFX scope creep risk",category:"post",condition:e=>e.complexity.vfxLight,scoreDelta:.8,generateFlag:()=>({ruleId:"vfx-scope-creep",title:"VFX scope creep risk",explanation:'"Light/simple" VFX often grows in scope during post. Rounds of revisions add cost.',challenge:"Define VFX shots precisely. Budget for at least 2 rounds of revisions. Consider bidding heavy.",category:"post",severity:"medium"})},{id:"no-contingency",description:"Missing or inadequate contingency",category:"budget",condition:e=>!e.budgetSnapshot.hasContingency||void 0!==e.budgetSnapshot.contingencyPercent&&e.budgetSnapshot.contingencyPercent<5,scoreDelta:1,generateFlag:e=>({ruleId:"no-contingency",title:"No real contingency",explanation:`Contingency is ${void 0!==e.budgetSnapshot.contingencyPercent?`only ${e.budgetSnapshot.contingencyPercent}%`:"missing"}. Industry standard is minimum 5-10%.`,challenge:"Ensure minimum 5% contingency is visible in budget. 10% preferred for complex shoots.",category:"budget",severity:"high"})},{id:"ot-unpriced",description:"OT implied but not budgeted",category:"budget",condition:(e,t)=>(t?t.dayDeficit>0||t.highRiskDays.length>0:1>=(e.proposedShootDays||1))&&!e.budgetSnapshot.otAllowed,scoreDelta:.8,generateFlag:()=>({ruleId:"ot-unpriced",title:"OT implied but unpriced",explanation:"Schedule is tight but overtime is not allowed/budgeted. OT will likely be needed.",challenge:"Either allow for OT in budget or add shoot days to reduce pressure.",category:"budget",severity:"medium"})},{id:"number-too-early",description:"Number locked before boards",category:"politics",condition:e=>e.politics.numberBeforeBoardsLocked,scoreDelta:.7,generateFlag:()=>({ruleId:"number-too-early",title:"Expectations harden too early",explanation:"Budget number being set before boards/script is locked. Changes will feel like overruns.",challenge:"Flag this early with client. Present as range, not single number. Document assumptions.",category:"politics",severity:"medium"})},{id:"procurement-early",description:"Procurement involved early",category:"politics",condition:e=>e.politics.procurementInvolvedEarly,scoreDelta:.6,generateFlag:()=>({ruleId:"procurement-early",title:"Creative compromise likely",explanation:"Procurement involvement early often leads to budget pressure before scope is understood.",challenge:"Ensure creative decision-makers see budget alongside scope. Document trade-offs clearly.",category:"politics",severity:"low"})},{id:"talent-usage-material",description:"Talent usage exposure material",category:"talent",condition:e=>{if(!e.scriptBreakdown)return e.complexity.multipleHeroTalent;let t=e.scriptBreakdown.talentRollup;return t.totalUniqueHeroRoles>=2||t.totalUniqueFeaturedRoles>=3},scoreDelta:.6,generateFlag:e=>({ruleId:"talent-usage-material",title:"Multiple featured roles driving usage exposure",explanation:"Multiple hero or featured roles on camera. Usage fees will be significant.",challenge:"Ensure talent usage is budgeted per role. Consider usage territory carefully.",category:"talent",severity:"medium"})},{id:"ww-usage-impact",description:"Worldwide usage materially changes budget",category:"talent",condition:e=>"Worldwide"===e.usageTerritory,scoreDelta:.5,generateFlag:()=>({ruleId:"ww-usage-impact",title:"WW usage materially changes budget",explanation:"Worldwide usage significantly increases talent costs vs. UK or US only.",challenge:"Confirm WW is actually needed. Consider staged rollout to manage exposure.",category:"talent",severity:"low"})},{id:"children-involved",description:"Children on set - restricted working hours",category:"schedule",condition:e=>e.complexity.childrenInvolved,scoreDelta:.8,generateFlag:()=>({ruleId:"children-involved",title:"Children: restricted working hours",explanation:`Children have legally restricted hours. ${f}. Requires licensed chaperone.`,challenge:"Schedule children's scenes for their best working hours. Budget for chaperone and welfare. May need additional shoot days.",category:"schedule",severity:"medium"})},{id:"children-under-5",description:"Very young children - severely restricted hours",category:"schedule",condition:e=>e.complexity.childrenUnder5,scoreDelta:1.5,generateFlag:()=>({ruleId:"children-under-5",title:"Children under 5: severe restrictions",explanation:`${b}. Very limited shooting window - typically only 2 hours of actual performance time.`,challenge:"Plan to shoot all under-5 scenes within 2-hour performance window. Consider twins/doubles. Licensed chaperone mandatory. May need significantly more days.",category:"schedule",severity:"high"})},{id:"eu-short-shoot",description:"EU short shoot efficiency loss",category:"budget",condition:e=>"EU"===e.shootingContext&&2>=(e.proposedShootDays||1),scoreDelta:.5,generateFlag:()=>({ruleId:"eu-short-shoot",title:"Short shoot day burn is higher",explanation:"2-day EU shoots have higher per-day cost. Mobilization costs spread over fewer days.",challenge:"Consider if EU service company still offers savings at this scale. UK might be comparable.",category:"budget",severity:"low"})}],O=[{id:"preproduction",name:"Pre-production",required:!0},{id:"shoot",name:"Shoot costs",required:!0},{id:"director",name:"Director & Producer fees",required:!0},{id:"talent_bsf",name:"Talent (BSF)",required:!0},{id:"talent_usage",name:"Talent (Usage exposure)",required:!0},{id:"travel",name:"Travel & accommodation",required:!1},{id:"insurance",name:"Insurance & risk",required:!0},{id:"post",name:"Post-production",required:!0},{id:"contingency",name:"Contingency",required:!0}];function W(){return{shootingContext:"UK",euCountry:void 0,usageTerritory:"UK",usageTerm:1,proposedShootDays:void 0,companyMovesPerDay:void 0,interiorExteriorMix:!1,deliverables:{tvc30:!0,tvc15:!1,tvc10:!1,socialCutdowns:!1,vertical916:!1,stillGrabs:!1,behindTheScenes:!1},complexity:{technical:!1,heroProduct:!1,vfxLight:!1,vfxHeavy:!1,fixInPost:!1,multipleHeroTalent:!1,specialEquipment:!1,childrenInvolved:!1,childrenUnder5:!1},politics:{numberBeforeBoardsLocked:!1,procurementInvolvedEarly:!1,multipleAgencyStakeholders:!1,clientOnSet:!1},budgetSnapshot:{hasContingency:!1,otAllowed:!1},productionAssumptions:{locationGroups:[],mocoAlternatives:{enabled:!1,sceneOverrides:{}},secondUnitAvailable:!1,goldenHourGrouped:!1,nightScenesGrouped:!1,experiencedCrew:!1,nearbyLocations:!1,studioAvailable:!1}}}function z(e){return`\xa3${e.toLocaleString("en-GB")}`}let G=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},X=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var K={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let V=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:n,...l},d)=>(0,a.createElement)("svg",{ref:d,...K,width:t,height:t,stroke:e,strokeWidth:i?24*Number(s)/Number(t):s,className:X("lucide",r),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(l)&&{"aria-hidden":"true"},...l},[...n.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(o)?o:[o]])),Y=(e,t)=>{let s=(0,a.forwardRef)(({className:s,...i},r)=>(0,a.createElement)(V,{ref:r,iconNode:t,className:X(`lucide-${G(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...i}));return s.displayName=G(e),s},_=Y("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Z=Y("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),J=Y("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Q=Y("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ee=Y("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),et=Y("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ea=Y("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),es=Y("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ei=[{text:"What's the most you ever lost on a coin toss?",film:"No Country for Old Men"},{text:"You're gonna need a bigger boat.",film:"Jaws"},{text:"Show me the money!",film:"Jerry Maguire"},{text:"I love the smell of napalm in the morning.",film:"Apocalypse Now"},{text:"I'll be back.",film:"The Terminator"},{text:"There's no place like home.",film:"The Wizard of Oz"}];function er(){let s,[i,b]=(0,a.useState)("landing"),[f,z]=(0,a.useState)("next"),[G,X]=(0,a.useState)(0),[K,V]=(0,a.useState)(W()),[Y,_]=(0,a.useState)(null),[Z,J]=(0,a.useState)({shootDays:3,postBudget:1e5,totalBudget:void 0,hasBudgetIndication:!1}),[Q,ee]=(0,a.useState)(!1),[et,ea]=(0,a.useState)("idle"),[es,er]=(0,a.useState)(null),[em,eg]=(0,a.useState)(null),[ex,ey]=(0,a.useState)([]),eb=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=setInterval(()=>{X(e=>(e+1)%ei.length)},6e3);return()=>clearInterval(e)},[]),(0,a.useEffect)(()=>{let e=e=>{"Enter"===e.key&&"landing"!==i&&"results"!==i?ef():"Escape"===e.key&&"landing"!==i&&ev()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i]);let ef=()=>{z("next"),"politics"===i?ew():b({landing:"script",script:"context",context:"assumptions",assumptions:"complexity",complexity:"politics",politics:"processing",processing:"results",results:"results"}[i])},ev=()=>{z("prev"),b({landing:"landing",script:"landing",context:"script",assumptions:"context",complexity:"assumptions",politics:"complexity",processing:"politics",results:"politics"}[i])},ew=()=>{b("processing"),setTimeout(()=>{_(function(e){var t,a,s,i;let b,f,W,z,G,X,K,V,Y,_,Z,J,Q,ee,et,ea,es,ei,er,eo,en,el,ed,ec,eu,ep,eh,em,eg,ex,ey,eb,ef;!e.scriptText||e.scriptBreakdown||e.aiBreakdown||(b=e.scriptText.split("\n"),f=[],W=new Map,z=[],G=0,X=null,K=()=>{if(X&&z.length>0){let e,t,a,s,i,r,c,u,p,h=z.join("\n"),m=X.location.toLowerCase(),g=(W.get(m)||0)+1;W.set(m,g);let x=(e=h.split("\n"),t=new Set,a=!1,e.forEach(e=>{let s=e.trim();if(d.test(s)){let e=s.match(d);if(e){let s=e[1].trim();["THE","WE","CUT","FADE","DISSOLVE","ANGLE","CLOSE","WIDE"].includes(s)||(t.add(s),a=!0)}}}),{heroPrincipalCount:Math.min((s=Array.from(t)).length,2),featuredCount:Math.max(0,s.length-2),hasDialogue:a}),y=Math.min(Math.max(1,Math.ceil(h.split(/\n\n+/).filter(e=>e.trim().length>0).filter(e=>!d.test(e.trim().split("\n")[0])).length/2)),10),b=(i=h.toLowerCase(),o.some(e=>i.includes(e))),v=(r=h.toLowerCase(),n.some(e=>r.includes(e))),w=(c=h.toLowerCase(),(u=l.filter(e=>c.includes(e)).length)>=2?"Heavy":u>=1?"Light":"None"),N=(p=h.toLowerCase(),["stunt","fight","chase","explosion","crash","crowd","mass","choreograph","dance","action sequence","battle"].some(e=>p.includes(e))?"High":["run","jump","climb","swim","drive","ride","physical"].some(e=>p.includes(e))?"Medium":"Low"),k={id:`scene-${G}`,sceneNumber:G,intExt:X.intExt,dayNight:X.dayNight,locationName:X.location,isLocationReused:g>1,setType:"INT"===X.intExt?"Studio":"Practical",actionComplexity:N,technicalComplexity:b,heroProductMoment:v,vfxLevel:w,description:h.substring(0,200),estimatedShots:y,artDept:{setDressingRequired:!0,propsRequired:v?"Hero":"Practical",buildImplied:!1},wardrobe:{principalWardrobe:x.heroPrincipalCount>0,featuredWardrobe:x.featuredCount>0,continuityMultiples:!1,quickChanges:!1},talent:{heroPrincipalCount:x.heroPrincipalCount,featuredCount:x.featuredCount,walkOnCount:0,extrasCount:0,hasDialogue:x.hasDialogue,hasFeaturedAction:"Low"!==N,isBackgroundOnly:!1}};f.push(k)}},b.forEach(e=>{let t=e.trim();if(t.match(r)){let e=c(t.replace(r,"").trim());if(e){K(),G++,X=e,z=[];return}}let a=c(t);if(a){K(),G++,X=a,z=[];return}X&&z.push(e)}),K(),i=f,eh=new Set,em=new Set,eg=0,ex=0,i.forEach((e,t)=>{for(let a=0;a<e.talent.heroPrincipalCount;a++)eh.add(`hero-${t}-${a}`);for(let a=0;a<e.talent.featuredCount;a++)em.add(`featured-${t}-${a}`);eg+=e.talent.walkOnCount,ex=Math.max(ex,e.talent.extrasCount)}),ey=Math.ceil(.6*eh.size),eb=Math.ceil(.5*em.size),ef=i.length,V={totalUniqueHeroRoles:Math.max(1,ey),totalUniqueFeaturedRoles:eb,totalWalkOns:eg,peakExtrasRequirement:ex,totalTalentDays:ef},_=Math.max(0,(Y=W.size)-1),Z=f.some(e=>"INT"===e.intExt)&&f.some(e=>"EXT"===e.intExt),J=f.some(e=>"DAY"===e.dayNight)&&f.some(e=>"NIGHT"===e.dayNight),Q=f.reduce((e,t)=>e+t.estimatedShots,0),ee=f.some(e=>"None"!==e.vfxLevel),et=f.some(e=>"Heavy"===e.vfxLevel)?"Heavy":f.some(e=>"Light"===e.vfxLevel)?"Light":"None",ea=f.some(e=>e.technicalComplexity),es=f.some(e=>e.heroProductMoment),e.scriptBreakdown={scenes:f,totalScenes:f.length,uniqueLocations:Y,companyMovesEstimate:_,intExtMix:Z,dayNightMix:J,totalEstimatedShots:Q,talentRollup:V,hasVFX:ee,vfxComplexity:et,hasTechnicalShots:ea,hasHeroProduct:es});let ev=function(e,t=y){let a=e.scriptBreakdown,s=e.aiBreakdown,i=e.proposedShootDays||1,r=[];if(s&&s.rollup){let a=s.rollup,o=a.estimatedShootDays,n=a.totalEstimatedShots,l=s.companyMoves,d=a.mocoRequired||!1,c=a.studioShoot||!1,{adjustedDays:u,adjustedMoves:p,savingsNotes:h}=function(e,t,a,s,i,r,o,n){if(!o)return{adjustedDays:e,adjustedMoves:t,savingsNotes:[]};let l=e,d=t,c=[];if(s&&d>0){let e=Math.floor(60*d/510);e>0&&(l=Math.max(1,l-e),c.push(`Studio shoot: set changes (not location moves) save ~${e} day(s)`)),d=0,c.push("Studio shoot: 0 company moves (sets built side by side)")}if(o.locationGroups&&o.locationGroups.length>0){let e=0;o.locationGroups.forEach(t=>{t.sceneNumbers.length>1&&(e+=t.sceneNumbers.length-1)});let t=Math.min(d,e);if(d=Math.max(0,d-t),t>0){c.push(`Location groupings reduce company moves by ${t}`);let e=105*t,a=Math.floor(e/510);a>0&&(l=Math.max(1,l-a),c.push(`Reduced moves save ~${Math.round(e/60)} hours (${a} day equivalent)`))}}if(a&&!s&&o.mocoAlternatives?.enabled){let e=Math.round(.33*l);l=Math.max(1,l-e),c.push(`VFX approach instead of MOCO saves ~${e} day(s)`)}if(i&&o.secondUnitAvailable&&r>0){let e=Math.floor(r/10);e>0?(l=Math.max(1,l-e),c.push(`2nd Unit handles ${r} food/product setups in parallel, saves ~${e} day(s)`)):r>=5?(l=Math.max(1,l-.5),c.push(`2nd Unit handles ${r} food/product setups in parallel, saves ~0.5 day`)):c.push(`2nd Unit handles ${r} food/product setups (minor time savings)`)}if(o.nearbyLocations&&d>0){let e=.1*d;if(e>=.5){let t=Math.floor(e);t>0&&(l=Math.max(1,l-t),c.push(`Nearby locations save ~${30*t} mins total (${t} day equivalent)`))}}if(o.experiencedCrew){let e=.1*l;if(e>=.5){let t=Math.floor(e);t>0&&(l=Math.max(1,l-t),c.push(`Experienced crew efficiency saves ~${t} day(s)`))}}return o.studioAvailable&&c.push("Studio available reduces weather contingency risk"),o.goldenHourGrouped&&c.push("Golden hour scenes grouped efficiently - reduced schedule pressure"),o.nightScenesGrouped&&c.push("Night scenes consolidated into single overnight - avoids turnaround issues"),{adjustedDays:Math.round(l),adjustedMoves:d,savingsNotes:c}}(o,l,d,c,a.secondUnitPossible||!1,a.secondUnitSetups||0,e.productionAssumptions,0),m=n/Math.max(1,u),g=p/Math.max(1,u);c&&r.push("ðŸŽ¬ STUDIO SHOOT DETECTED - Higher efficiency (12-15 setups/day achievable)"),r.push(...a.scheduleNotes),h.length>0&&(r.push("--- Production Assumptions Applied ---"),r.push(...h),u<o&&r.push(`Optimized: ${o} days â†’ ${u} days`),p<l&&r.push(`Moves reduced: ${l} â†’ ${p}`));let x=u-i;x>0&&r.push(`${h.length>0?"Optimized estimate":"AI analysis"} recommends ${u} days but ${i} proposed (${x} day deficit)`);let y=[];if(g>=1.5)for(let e=1;e<=u;e++)y.push(e);let b=[];for(let e=1;e<=u;e++)b.push({dayNumber:e,scenes:[],shots:Math.round(m),totalMinutesRequired:70*m,availableMinutes:I(t),overrunMinutes:0,companyMoves:Math.round(g),isOverloaded:m>8||g>1.5,pressurePoints:[]});return{days:b,totalDaysRequired:u,proposedDays:i,dayDeficit:Math.max(0,x),avgShotsPerDay:m,avgCompanyMovesPerDay:g,highRiskDays:y,scheduleNotes:r}}if(!a||0===a.scenes.length){let a=e.complexity.technical?5:e.complexity.heroProduct?6:8,s=q(1,[{id:"mock-1",sceneNumber:1,intExt:e.interiorExteriorMix?"INT/EXT":"INT",dayNight:"DAY",locationName:"Main Location",isLocationReused:!0,setType:"Practical",actionComplexity:e.complexity.technical?"High":"Medium",technicalComplexity:e.complexity.technical,heroProductMoment:e.complexity.heroProduct,vfxLevel:e.complexity.vfxHeavy?"Heavy":e.complexity.vfxLight?"Light":"None",description:"Estimated scene based on input",estimatedShots:a,artDept:{setDressingRequired:!0,propsRequired:"Practical",buildImplied:!1},wardrobe:{principalWardrobe:!0,featuredWardrobe:!1,continuityMultiples:!1,quickChanges:!1},talent:{heroPrincipalCount:1,featuredCount:0,walkOnCount:0,extrasCount:0,hasDialogue:!0,hasFeaturedAction:!0,isBackgroundOnly:!1}}],e.companyMovesPerDay||0,t);return r.push("Schedule estimated from inputs only - no detailed breakdown provided"),r.push("For accurate assessment, provide script or scene breakdown"),{days:[s],totalDaysRequired:1,proposedDays:i,dayDeficit:i>=1?0:1-i,avgShotsPerDay:a,avgCompanyMovesPerDay:e.companyMovesPerDay||0,highRiskDays:s.isOverloaded?[1]:[],scheduleNotes:r}}let o=function(e,t,a=y){var s;let i,r=I(a),o=[],n=Array.from((s=[...e.scenes],i=new Map,s.forEach(e=>{let t=e.locationName.toLowerCase().trim();i.has(t)||i.set(t,[]),i.get(t).push(e)}),i).entries()).sort((e,t)=>t[1].length-e[1].length),l=[],d=0,c=1;if(n.flatMap(([,e])=>e).forEach(e=>{let t=U(e,a);if(d+t>r&&l.length>0){let e=F(l);o.push(q(c,l,e,a)),c++,l=[],d=0}l.push(e),d+=t}),l.length>0){let e=F(l);o.push(q(c,l,e,a))}return o}(a,0,t),n=o.length,l=o.reduce((e,t)=>e+t.shots,0),d=o.reduce((e,t)=>e+t.companyMoves,0),c=l/n,u=d/n,p=o.filter(e=>e.isOverloaded||e.companyMoves>=3||e.shots>7).map(e=>e.dayNumber),h=n-i;return h>0&&(r.push(`Schedule requires ${n} days but only ${i} proposed`),r.push(`Day deficit of ${h} will likely require overtime or scope reduction`)),c>7&&r.push(`Average ${c.toFixed(1)} shots/day is aggressive at standard complexity`),u>=2&&r.push(`Average ${u.toFixed(1)} company moves/day will impact efficiency`),p.length>0&&r.push(`${p.length} day(s) flagged as high-risk: ${p.join(", ")}`),"EU"===e.shootingContext&&i<=2?r.push("Short EU shoot (â‰¤2 days) has higher per-day burn; savings erode"):"EU"===e.shootingContext&&i>=4&&r.push("EU shoot of 4+ days improves efficiency; better value per day"),{days:o,totalDaysRequired:n,proposedDays:i,dayDeficit:h,avgShotsPerDay:c,avgCompanyMovesPerDay:u,highRiskDays:p,scheduleNotes:r}}(e),{score:ew,flags:eN}=(ei=0,er=[],H.forEach(t=>{try{if(t.condition(e,ev)){ei+=t.scoreDelta;let a=t.generateFlag(e,ev);a&&er.push(a)}}catch{console.warn(`Rule ${t.id} evaluation failed`)}}),{score:ei=Math.min(10,ei),flags:er}),ek=ew<=v?"GREEN":ew<=w?"AMBER":"RED",eS=(eo=0,(e.scriptBreakdown&&e.scriptBreakdown.scenes.length>0&&(eo+=3),e.proposedShootDays&&eo++,(e.budgetSnapshot.totalBudget||e.budgetSnapshot.productionBudget)&&eo++,e.budgetSnapshot.postBudget&&eo++,(e.deliverables.tvc30||e.deliverables.tvc15||e.deliverables.socialCutdowns)&&eo++,void 0!==e.companyMovesPerDay&&eo++,e.euCountry&&"EU"===e.shootingContext&&eo++,e.usageTerritory&&eo++,e.budgetSnapshot.hasContingency||e.budgetSnapshot.postBudget||e.scriptBreakdown||!(eo<=5))?eo>=10?"High":eo>=6?"Medium":"Low":"Low"),ej=function(e,t){var a,s;let i=e.proposedShootDays||t.totalDaysRequired||1,r=[],o=(a=e.shootingContext,s=e.euCountry,"UK"===a?T:s&&k[s]?k[s].costPerDay:N),n=1===i?.55:2===i?.75:3===i?.9:1,l={lean:Math.round(o.lean*n),standard:Math.round(o.standard*n),ambitious:Math.round(o.ambitious*n)};if("UK"===e.shootingContext){let a=function(e,t=0,a=!0){let s=[],i=e,r=e,o=e,n=e,l=null;if(a){let t;i=(l={dop:{prep:t=u+Math.max(h,e*p),shoot:e,total:t+e},firstAD:{prep:x,shoot:e,total:x+e},productionDesigner:{prep:m,shoot:e,total:m+e},wardrobeStylist:{prep:g,shoot:e,total:g+e}}).dop.total,r=l.firstAD.total,o=l.productionDesigner.total,n=l.wardrobeStylist.total,s.push(`DOP: ${l.dop.prep} prep + ${e} shoot = ${i} days`),s.push(`1st AD: ${l.firstAD.prep} prep + ${e} shoot = ${r} days`),s.push(`Prod Designer: ${l.productionDesigner.prep} prep + ${e} shoot = ${o} days`),s.push(`Wardrobe: ${l.wardrobeStylist.prep} prep + ${e} shoot = ${n} days`)}return{total:3e3*i+900*r+950*o+850*n+.5*t*5700,breakdown:l,notes:s}}(i,0,!0),s=a.total;a.breakdown&&(r.push("UK shoot includes HOD prep days:"),a.notes.forEach(e=>r.push(`  ${e}`))),r.push(`Total HOD costs: \xa3${s.toLocaleString()}`),n<1&&r.push(`Day-count efficiency: ${i} day shoot = ${Math.round(100*n)}% of multi-day rate`);let o={lean:l.lean*i+s,standard:l.standard*i+s,ambitious:l.ambitious*i+s};if(r.push("UK (APA-style) production costs"),e.proposedShootDays&&t.totalDaysRequired>e.proposedShootDays){let a=t.totalDaysRequired-e.proposedShootDays;r.push(`WARNING: Schedule requires ${t.totalDaysRequired} days but budgeting for ${e.proposedShootDays} (${a} day deficit)`)}return{shootDays:i,costPerDay:l,totalProduction:o,hodCosts:s,travelDays:0,travelCost:0,notes:r}}{let a={lean:l.lean*i,standard:l.standard*i,ambitious:l.ambitious*i};n<1&&r.push(`Day-count efficiency: ${i} day shoot = ${Math.round(100*n)}% of multi-day rate`),r.push(`EU Service Company (${e.euCountry||"EU Average"}):`),r.push(`  ${i} shoot days \xd7 \xa3${l.standard.toLocaleString()}/day (adjusted)`),r.push(`  Service company total: \xa3${a.standard.toLocaleString()}`);let s=function(e,t=0){let a=[],s=S.dayRate*e,i=j.dayRate*e,r=e+D.prepDays,o=.5*D.dayRate*D.travelDays,n=D.dayRate*r+o,l=e+C.prepDays,d=.5*C.dayRate*C.travelDays,c=C.dayRate*l+d,u=e+M.prepDays,p=.5*M.dayRate*M.travelDays,h=M.dayRate*u+p,m=e+$.prepDays,g=.5*$.dayRate*$.travelDays,x=$.dayRate*m+g,y=$.assistantDayRate*m+.5*$.assistantDayRate*$.travelDays,b=s+i+n+c+h+x+y;a.push("UK Above-the-Line (traveling to EU):"),a.push(`  Director: \xa3${s.toLocaleString()} (${e} shoot days \xd7 \xa3${S.dayRate.toLocaleString()})`),a.push(`  Producer: \xa3${i.toLocaleString()} (${e} shoot days \xd7 \xa3${j.dayRate.toLocaleString()})`),a.push(`  DOP: \xa3${n.toLocaleString()} (${r} days + travel)`),a.push(`  1st AD: \xa3${c.toLocaleString()} (${l} days + travel)`),a.push(`  Prod Designer: \xa3${h.toLocaleString()} (${u} days + travel)`),a.push(`  Wardrobe: \xa3${x.toLocaleString()} (${m} days + travel)`),a.push(`  Wardrobe Asst: \xa3${y.toLocaleString()} (${m} days + travel)`),a.push(`  Crew fees subtotal: \xa3${b.toLocaleString()}`);let f=7*P.flightPerPerson.standard,v=Math.max(D.prepDays,C.prepDays,M.prepDays,$.prepDays),w=e+v+2,N=7*w*P.hotelPerNight.standard,k=e+v,T=7*k*P.perDiemPerDay;a.push(""),a.push("Travel & Accommodation:"),a.push(`  Flights (7 crew): \xa3${f.toLocaleString()}`),a.push(`  Hotels (${w} nights \xd7 7 crew): \xa3${N.toLocaleString()}`),a.push(`  Per diems (${k} days \xd7 7 crew): \xa3${T.toLocaleString()}`);let R=f+N+T;a.push(`  Travel subtotal: \xa3${R.toLocaleString()}`);let L=E.casting.standard,A=E.storyboards.standard,U=E.wardrobeSourcing.standard,I=E.officeAdmin.standard,F=L+A+U+I;a.push(""),a.push("Pre-production (UK-side):"),a.push(`  Casting: \xa3${L.toLocaleString()}`),a.push(`  Storyboards/animatics: \xa3${A.toLocaleString()}`),a.push(`  Wardrobe sourcing: \xa3${U.toLocaleString()}`),a.push(`  Office/admin: \xa3${I.toLocaleString()}`),a.push(`  Pre-production subtotal: \xa3${F.toLocaleString()}`);let q=t>0?t:(b+R+F)*2,H=Math.max(B.minimum,Math.min(B.maximum,Math.round(q*B.baseRate)));a.push(""),a.push(`Insurance: \xa3${H.toLocaleString()}`);let O=b+f+N+T+F+H;return a.push(""),a.push(`TOTAL UK Above-the-Line: \xa3${O.toLocaleString()}`),{crewFees:{director:s,producer:i,dop:n,firstAD:c,productionDesigner:h,wardrobeStylist:x,wardrobeAssistant:y},totalFees:b,travelCosts:f,hotelCosts:N,perDiems:T,preProductionCosts:F,insurance:H,total:O,notes:a}}(i,a.standard);r.push(""),s.notes.forEach(e=>r.push(e)),r.push(""),r.push("EU shoots include +3 prep days for recce & logistics");let o={lean:a.lean+s.total,standard:a.standard+s.total,ambitious:a.ambitious+s.total};if(r.push(""),r.push(`TOTAL PRODUCTION: \xa3${o.standard.toLocaleString()}`),r.push("(EU Service Company + UK Above-the-Line)"),i<=2&&(r.push(""),r.push("Note: Short EU shoot (â‰¤2 days) has higher per-day burn")),e.proposedShootDays&&t.totalDaysRequired>e.proposedShootDays){let a=t.totalDaysRequired-e.proposedShootDays;r.push(`WARNING: Schedule requires ${t.totalDaysRequired} days but budgeting for ${e.proposedShootDays} (${a} day deficit)`)}return{shootDays:i,costPerDay:l,totalProduction:o,hodCosts:s.totalFees,travelDays:2,travelCost:s.travelCosts+s.hotelCosts+s.perDiems,ukAboveLineCosts:s,notes:r}}}(e,ev),eD=(en=[],el=8e4,ed=12e4,ec=!1,e.complexity.vfxHeavy?(el=R,ed=L,ec=!0,en.push("Heavy VFX requires Â£120-180k post budget")):e.complexity.vfxLight&&(el=96e3,ed=R,en.push("Light VFX adds 20%+ to baseline post")),+!!e.deliverables.tvc30+ +!!e.deliverables.tvc15+ +!!e.deliverables.tvc10+3*!!e.deliverables.socialCutdowns+2*!!e.deliverables.vertical916+ +!!e.deliverables.stillGrabs>5&&(el*=1.15,ed*=1.15,en.push("Multiple deliverable versions increase post scope")),e.deliverables.vertical916&&en.push("9:16 versions require reframing, not just resize"),e.complexity.fixInPost&&(el*=1.1,ed*=1.2,en.push('"Fix in post" adds 10-20% post contingency')),en.push(`Minimum \xa3${(el/1e3).toFixed(0)}k covers: online, grade, sound, music, deliverables`),{minimum:Math.round(el),maximum:Math.round(ed),vfxAdjusted:ec,notes:en}),eC=function(e,t){let a=[],s=[],i=e.proposedShootDays||t.totalDaysRequired||1,r=0,o=0,n=0,l=0;if(e.aiBreakdown){let t=e.aiBreakdown.rollup;r=t.totalHeroPrincipal||0,o=t.totalFeatured||0,n=t.totalWalkOns||0,l=t.peakExtras||0,s.push("Talent counts from AI script breakdown")}else if(e.scriptBreakdown){let t=e.scriptBreakdown.talentRollup;r=t.totalUniqueHeroRoles||1,o=t.totalUniqueFeaturedRoles||0,n=t.totalWalkOns||0,l=t.peakExtrasRequirement||0}else r=e.complexity.multipleHeroTalent?3:1,o=2*!!e.complexity.multipleHeroTalent;let d=A[e.usageTerritory],c=Math.min(i,Math.max(1,Math.ceil(.75*i))),u=Math.min(i,Math.max(1,Math.ceil(.5*i)));if(r>0){let e=350*c+100+175;a.push({category:"Principal Featured",count:r,bsfPerPerson:Math.round(e),usagePerPerson:d.principalFeatured||d.hero,totalBsf:Math.round(e*r),totalUsage:{lean:(d.principalFeatured||d.hero).lean*r,standard:(d.principalFeatured||d.hero).standard*r,ambitious:(d.principalFeatured||d.hero).ambitious*r}})}if(o>0){let e=350*u+50+87.5;a.push({category:"Secondary Featured",count:o,bsfPerPerson:Math.round(e),usagePerPerson:d.secondaryFeatured||d.featured,totalBsf:Math.round(e*o),totalUsage:{lean:(d.secondaryFeatured||d.featured).lean*o,standard:(d.secondaryFeatured||d.featured).standard*o,ambitious:(d.secondaryFeatured||d.featured).ambitious*o}})}if(n>0){let e=550;a.push({category:"Walk-on",count:n,bsfPerPerson:Math.round(e),usagePerPerson:{lean:0,standard:0,ambitious:0},totalBsf:Math.round(e*n),totalUsage:{lean:0,standard:0,ambitious:0}})}if(l>0){let e=120;a.push({category:"Background",count:l,bsfPerPerson:Math.round(e),usagePerPerson:{lean:0,standard:0,ambitious:0},totalBsf:Math.round(e*l),totalUsage:{lean:0,standard:0,ambitious:0}})}let p=r+o+n,h=50*p,m=a.reduce((e,t)=>e+t.totalBsf,0);m+=h;let g=a.reduce((e,t)=>e+t.totalUsage.lean,0),x=a.reduce((e,t)=>e+t.totalUsage.ambitious,0);if(s.push(`Usage territory: ${e.usageTerritory}, ${e.usageTerm||1} year(s)`),s.push(`PF BSF: \xa3350/day + fittings + travel`),s.push(`SF BSF: \xa3350/day + fittings`),n>0&&s.push(`WO BSF: \xa3500/day + fitting`),l>0&&s.push(`BG: \xa3120/day (no usage)`),h>0&&s.push(`Callbacks: \xa3${h.toLocaleString()} (${p} \xd7 \xa350)`),r>0){let t=d.principalFeatured||d.hero;s.push(`PF Usage (${e.usageTerritory} 1yr): \xa3${t.standard.toLocaleString()}/person`)}if(o>0){let t=d.secondaryFeatured||d.featured;s.push(`SF Usage (${e.usageTerritory} 1yr): \xa3${t.standard.toLocaleString()}/person`)}return r>=5&&s.push("âš  High principal count significantly impacts usage exposure"),"Worldwide"===e.usageTerritory&&s.push("âš  WW usage materially increases talent costs vs UK only"),s.push(""),s.push(`Total BSF (incl. fittings/callbacks): \xa3${m.toLocaleString()}`),s.push(`Total Usage: \xa3${g.toLocaleString()} - \xa3${x.toLocaleString()}`),{estimates:a,totalBsf:m,totalUsageMin:g,totalUsageMax:x,notes:s}}(e,ev),eM=function(e,t,a){let s=[],i=[],r=[];if(O.forEach(o=>{let n=function(e,t,a,s,i,r){let o,n=!1,l=a;switch(e){case"preproduction":(n=!!(s.budgetSnapshot.totalBudget||s.budgetSnapshot.productionBudget))||(o="Pre-production costs should be explicitly included");break;case"shoot":n=!!(s.budgetSnapshot.productionBudget||s.budgetSnapshot.totalBudget);break;case"director":(n=!!(s.budgetSnapshot.productionBudget||s.budgetSnapshot.totalBudget))||(o="Director & Producer fees should be explicitly budgeted");break;case"talent_bsf":(n=r.totalBsf>0||!!s.budgetSnapshot.talentBudget)||(o="Talent BSF (basic session fees) not accounted for");break;case"talent_usage":!(n=r.totalUsageMin>0||!!s.budgetSnapshot.talentBudget)&&r.estimates.some(e=>"Hero"===e.category||"Featured"===e.category)&&(o="Not client-safe: talent usage exposure missing");break;case"travel":l="EU"===s.shootingContext,n="EU"===s.shootingContext||!0,"EU"!==s.shootingContext||n||(o="EU shoot requires travel, hotels, per diems, freight, extra insurance");break;case"insurance":n=!!(s.budgetSnapshot.totalBudget||s.budgetSnapshot.productionBudget);break;case"post":n=!!s.budgetSnapshot.postBudget||i.minimum>0;let d=s.budgetSnapshot.postBudget||0;d>0&&d<i.minimum?o=`Not client-safe: post budget \xa3${d.toLocaleString()} below floor \xa3${i.minimum.toLocaleString()}`:s.budgetSnapshot.postBudget||(o="Post budget not explicitly provided - using minimum floor");break;case"contingency":(n=s.budgetSnapshot.hasContingency)?void 0!==s.budgetSnapshot.contingencyPercent&&s.budgetSnapshot.contingencyPercent<5&&(o=`Contingency only ${s.budgetSnapshot.contingencyPercent}% - recommend minimum 5%`):o="No contingency visible - budget vulnerable to overruns";break;default:n=!1}return{category:t,present:n,required:l,note:o}}(o.id,o.name,o.required,e,t,a);s.push(n),n.required&&!n.present&&i.push(o.name),n.note&&r.push(n.note)}),"EU"===e.shootingContext){let e=s.find(e=>"Travel & accommodation"===e.category);e&&!e.present&&(i.push("Travel & accommodation (required for EU shoot)"),r.push("PIBS incomplete for foreign shoot - travel/hotels/per diems/freight/insurance required"))}let o=e.budgetSnapshot.postBudget||0;o>0&&o<8e4&&(r.push(`Post budget \xa3${o.toLocaleString()} below minimum \xa3${8e4.toLocaleString()}`),i.includes("Post-production")||i.push("Post-production (under-allowed)")),a.totalUsageMin>0&&0===(e.budgetSnapshot.talentBudget||0)&&r.push("Talent usage exposure not explicitly budgeted");let n=0===i.length,l=n&&0===r.filter(e=>e.includes("Not client-safe")).length;return{items:s,isComplete:n,isClientSafe:l,missingCritical:i,warnings:r}}(e,eD,eC),e$=ek;eM.isClientSafe||"GREEN"!==ek||(e$="AMBER",eN.push({ruleId:"pibs-incomplete",title:"PIBS incomplete",explanation:"Budget is not client-safe due to missing elements.",challenge:`Address: ${eM.missingCritical.join(", ")}`,category:"pibs",severity:"high"}));let eP=function(e,t){if("GREEN"===e)return"Schedule and budget assumptions align with production reality.";if("AMBER"!==e)return"Material misalignment between assumptions and production reality.";{let e=t.filter(e=>"high"===e.severity).length;return e>0?`${e} significant pressure point${e>1?"s":""} to address before committing.`:"Some tension between assumptions and reality that needs attention."}}(e$,eN),eE=function(e,t=5){let a={high:0,medium:1,low:2};return[...e].sort((e,t)=>a[e.severity]-a[t.severity]).slice(0,t).map(e=>{switch(e.category){case"schedule":if(e.title.includes("overload"))return"The schedule is overloaded â€“ not enough hours in the day.";if(e.title.includes("company move"))return"Too many company moves eating into shooting time.";if(e.title.includes("children"))return"Children on set will significantly restrict your shooting window.";return e.title;case"creative":if(e.title.includes("complexity"))return"High complexity flagged but not enough shoot days to deliver it.";if(e.title.includes("density"))return"Too many setups per day â€“ something will slip.";return e.title;case"post":if(e.title.includes("under-scoped"))return"Post-production budget looks light for the deliverables.";if(e.title.includes("VFX"))return"VFX scope has a habit of growing â€“ budget accordingly.";return e.title;case"budget":if(e.title.includes("contingency"))return"No real contingency in the budget.";if(e.title.includes("OT"))return"Overtime is likely but not budgeted.";return e.title;case"talent":return"Talent usage exposure will be significant.";case"pibs":return"Budget is not client-safe â€“ missing critical elements.";default:return e.title}})}(eN),eB=function(e,t=5){let a={high:0,medium:1,low:2};return[...e].sort((e,t)=>a[e.severity]-a[t.severity]).slice(0,t).map(e=>e.challenge)}(eN),eT=function(e,t){let a=e.budgetSnapshot.productionBudget||e.budgetSnapshot.totalBudget;if(!a)return e.complexity.vfxHeavy||e.complexity.multipleHeroTalent?"Ambitious":e.complexity.technical||e.complexity.heroProduct?"Standard":"Lean";let s=a/Math.max(1,t);return"UK"===e.shootingContext?s<8e4?"Lean":s<12e4?"Standard":"Ambitious":s<6e4?"Lean":s<1e5?"Standard":"Ambitious"}(e,ev.totalDaysRequired),eR={min:eC.totalBsf+eC.totalUsageMin,max:eC.totalBsf+eC.totalUsageMax},eL=function(e,t,a,s,i){let r=[];if(e.proposedShootDays){let a,s=t-e.proposedShootDays,i="aligned";s>1?(i="misaligned",a=`${s} days short of recommended`):1===s?(i="stretched",a="Tight but possible with discipline"):s<0&&(i="aligned",a="Comfortable margin"),r.push({label:"Shoot days",assumed:e.proposedShootDays,reality:t,status:i,note:a})}if(e.budgetSnapshot.productionBudget||e.budgetSnapshot.totalBudget){let t=e.complexity.vfxHeavy||e.complexity.multipleHeroTalent?"Ambitious":e.complexity.technical||e.complexity.heroProduct?"Standard":"Lean",s="aligned";"Lean"===a&&"Ambitious"===t?s="misaligned":"Lean"===a&&"Standard"===t?s="stretched":"Standard"===a&&"Ambitious"===t&&(s="stretched"),r.push({label:"Production scale",assumed:a,reality:`${t} implied by script`,status:s,note:"aligned"!==s?"Budget may not match ambition":void 0})}if(void 0!==e.budgetSnapshot.postBudget){let t,a=e.budgetSnapshot.postBudget,i="aligned";a<8e4?(i="misaligned",t=`Below \xa380k floor`):a<s&&(i="stretched",t="Light for deliverables scope"),r.push({label:"Post-production allowance",assumed:`\xa3${(a/1e3).toFixed(0)}k`,reality:`\xa3${(s/1e3).toFixed(0)}k minimum`,status:i,note:t})}if(i.max>0){let t,a=e.budgetSnapshot.talentBudget||0,s="aligned";a>0&&a<i.min?(s="misaligned",t="Talent budget significantly under exposure"):a>0&&a<.7*i.max&&(s="stretched",t="May need to revisit talent strategy"),a>0&&r.push({label:"Talent/usage exposure",assumed:`\xa3${(a/1e3).toFixed(0)}k`,reality:`\xa3${(i.min/1e3).toFixed(0)}k - \xa3${(i.max/1e3).toFixed(0)}k`,status:s,note:t})}let o=e.budgetSnapshot.contingencyPercent;if(void 0!==o||!e.budgetSnapshot.hasContingency){let t,a="aligned";e.budgetSnapshot.hasContingency&&0!==o?void 0!==o&&o<5&&(a="stretched",t="Below industry standard"):(a="misaligned",t="No safety net"),r.push({label:"Contingency",assumed:void 0!==o?`${o}%`:"None",reality:"5-10% standard",status:a,note:t})}return r}(e,ev.totalDaysRequired,eT,eD.minimum,eR),eA=(t=eD.minimum,eu=[],void 0!==e.budgetSnapshot.postBudget&&e.budgetSnapshot.postBudget<t&&eu.push("Post under-allowed"),"EU"!==e.shootingContext||e.budgetSnapshot.productionBudget||eu.push("EU shoot without confirmed production budget"),eR.max>5e4&&!e.budgetSnapshot.talentBudget&&eu.push("Usage exposure not budgeted"),e.budgetSnapshot.hasContingency||eu.push("Contingency missing"),!e.budgetSnapshot.otAllowed&&e.proposedShootDays&&e.proposedShootDays<=2&&eu.push("Tight schedule but no OT allowance"),eu),eU={heroPrincipal:e.aiBreakdown?.rollup?.totalHeroPrincipal||e.scriptBreakdown?.talentRollup?.totalUniqueHeroRoles||0,featured:e.aiBreakdown?.rollup?.totalFeatured||e.scriptBreakdown?.talentRollup?.totalUniqueFeaturedRoles||0,walkOns:e.aiBreakdown?.rollup?.totalWalkOns||e.scriptBreakdown?.talentRollup?.totalWalkOns||0,peakExtras:e.aiBreakdown?.rollup?.peakExtras||e.scriptBreakdown?.talentRollup?.peakExtrasRequirement||0},eI={flagged:ev.avgCompanyMovesPerDay>=2,reason:ev.avgCompanyMovesPerDay>=3?"Multiple company moves per day will eat into shooting time":ev.avgCompanyMovesPerDay>=2?"Company moves adding schedule pressure":void 0},eF=(a=e$,s=ev.totalDaysRequired,ep=`Initial feasibility check: ${"GREEN"===a?"achievable":"AMBER"===a?"possible with adjustments":"challenging"}. Recommended ${s} shoot day${s>1?"s":""} at ${eT.toLowerCase()} production scale. `,eB.length>0&&"GREEN"!==a?ep+=`Key consideration: ${eB[0].toLowerCase()}`:"GREEN"===a&&(ep+="Assumptions align with production reality."),ep),eq=function(e,t,a,s){let i={technical:[],risks:[],checklist:[]},r=e.aiBreakdown?.rollup,o=e.aiBreakdown?.scenes?.length||e.scriptBreakdown?.totalScenes||0,n=r?.locationMoves||Math.round(t.avgCompanyMovesPerDay*t.totalDaysRequired),l=e.aiBreakdown?.uniqueLocations||r?.actualLocations||n+1||0,d=r?.totalEstimatedShots||0,c=r?.studioShoot||!1;if(i.technical.push(`${o} scene${1!==o?"s":""} across ${l} unique location${1!==l?"s":""}`),c)i.technical.push("Studio shoot: 0 company moves, sets built side-by-side"),i.technical.push(`Estimated ${d} setups at 12-15 setups/day achievable`);else{i.technical.push(`${n} company move${1!==n?"s":""} required`);let e=Math.round(d/a);i.technical.push(`${d} setups = ~${e} setups/day target`)}if(r?.secondUnitPossible){let e=r.secondUnitSetups||0;i.technical.push(`2nd unit possible: ${e} setups (food/product) could run parallel`)}if(r?.mocoRequired){let e=r.mocoSetups||0;i.technical.push(`MOCO required: ${e} setup${1!==e?"s":""} (4 max/day on location, 6-8 in studio)`)}if(t.avgCompanyMovesPerDay>=2&&i.risks.push(`Schedule pressure: ${t.avgCompanyMovesPerDay.toFixed(1)} company moves/day will eat into shooting time`),t.highRiskDays.length>0){let e=t.highRiskDays.length;i.risks.push(`${e} high-risk day${1!==e?"s":""} (>10 setups or multiple moves)`)}r?.goldenHourDependent&&i.risks.push("Golden hour dependent: sunset/sunrise lighting is weather-contingent"),r?.nightShootRequired&&i.risks.push("Night shoot required: overtime premiums apply, crew turnaround concerns"),r?.hybridApproachNeeded&&i.risks.push("Hybrid approach needed: mixed day/night requires different camera techniques"),"RED"===s&&i.risks.push("Multiple risk factors stacking - consider splitting into multiple shoot days"),r?.secondUnitPossible&&i.checklist.push("Confirm: Does location permit two crews working simultaneously?"),c?(i.checklist.push("Verify: Studio can accommodate all sets side-by-side"),i.checklist.push("Check: Pre-light schedule for set transitions")):(i.checklist.push("Confirm: Location proximity - all within 15min drive?"),i.checklist.push("Check: Swing crew availability for pre-dressing next location")),r?.mocoRequired&&(i.checklist.push("Verify: MOCO rig access and space requirements at each location"),i.checklist.push("Confirm: VFX supervisor availability for MOCO programming")),r?.hasVFX&&(i.checklist.push("Check: VFX shots storyboarded and approved"),i.checklist.push("Confirm: VFX supervisor booked for shoot dates")),r?.highSpeedLimited&&i.checklist.push("Resolve: High-speed camera cannot work in low-light scenes - confirm CG approach with client");let u=r?.totalHeroPrincipal||0;if(u>2&&i.checklist.push(`Check: ${u} hero talent - wardrobe multiples for continuity?`),i.checklist.push("Verify: Call times work for talent/agent schedules"),i.checklist.push("Confirm: Catering can handle crew size and dietary requirements"),e.proposedShootDays&&a>e.proposedShootDays){let t=a-e.proposedShootDays;i.checklist.push(`CRITICAL: Schedule requires ${t} more day${1!==t?"s":""} than budget allows - negotiate scope or days`)}return i}(e,ev,ev.totalDaysRequired,e$),eH=void 0!==e.budgetSnapshot.postBudget&&e.budgetSnapshot.postBudget<eD.minimum;return{verdict:e$,verdictReason:eP,whyThisVerdict:eE,assumptionsVsReality:eL,recommendedShootDays:ev.totalDaysRequired,avgShotsPerDay:ev.avgShotsPerDay,highRiskDays:ev.highRiskDays,companyMovePressure:eI,schedule:ev,productionScale:eT,productionCost:ej,postProduction:eD,postUnderAllowed:eH,talentCost:eC,talentSummary:eU,usageExposureRange:eR,pibsCheck:eM,pibsWarnings:eA,whatToChallenge:eB,producerSummary:eq,copyReadySummary:eF,riskScore:ew,confidence:eS,flags:eN,assessedAt:new Date,inputHash:function(e){let t=JSON.stringify({context:e.shootingContext,country:e.euCountry,days:e.proposedShootDays,deliverables:e.deliverables,complexity:e.complexity}),a=0;for(let e=0;e<t.length;e++)a=(a<<5)-a+t.charCodeAt(e),a&=a;return Math.abs(a).toString(16)}(e)}}({...K,aiBreakdown:es?.breakdown||void 0})),b("results")},2e3)},eN=async t=>{let a=t.target.files?.[0];if(a){if(!("application/pdf"===a.type||a.name.toLowerCase().endsWith(".pdf"))){eg("Please upload a PDF file"),ee(!1);return}ee(!0),ea("extracting"),eg(null),er(null),ey(["Reading PDF file..."]);try{ey(e=>[...e,`Extracting text from ${a.name}...`]);let t=new FormData;t.append("file",a),console.log("[PDF Upload] Sending file to API:",a.name,a.size);let s=await fetch("/api/parse-pdf",{method:"POST",body:t});if(console.log("[PDF Upload] Response status:",s.status),!s.ok){let e,t=await s.text();console.error("[PDF Upload] Error response:",t);try{e=JSON.parse(t)}catch{e={error:t}}throw Error(e.error||`Server error: ${s.status}`)}let i=await s.json(),r=i.text;if(!r||r.length<50){ea("error"),eg("PDF appears to be empty or contains no extractable text"),ee(!1);return}ey(e=>[...e,`Extracted ${r.length.toLocaleString()} characters from ${i.pageCount} pages`,"Initializing AI analysis..."]),ea("analyzing");let{getAIBreakdownStreaming:o}=await e.A(38099);await o(r,e=>{ey(t=>[...t,e.message])},e=>{if(e.scriptExtracted&&e.breakdown){let t=e.breakdown.rollup;ey(a=>[...a,`âœ“ Identified ${e.breakdown.totalScenes} scenes`,`âœ“ Found ${e.breakdown.uniqueLocations} unique locations`,`âœ“ Estimated ${t?.estimatedShootDays} shoot days`,t?.hasTechnicalShots?"âœ“ Detected technical shots":null,t?.hasHeroProduct?"âœ“ Found hero product moment":null,t?.vfxComplexity!=="none"?`âœ“ VFX complexity: ${t?.vfxComplexity}`:null].filter(Boolean)),er(e),V(t=>({...t,scriptText:e.rawScriptText||r})),ea("done"),t&&(V(a=>({...a,proposedShootDays:t.estimatedShootDays,companyMovesPerDay:Math.ceil(e.breakdown.companyMoves/Math.max(1,t.estimatedShootDays)),complexity:{...a.complexity,technical:t.hasTechnicalShots,heroProduct:t.hasHeroProduct,vfxLight:"light"===t.vfxComplexity,vfxHeavy:"heavy"===t.vfxComplexity}})),J(e=>({...e,shootDays:t.estimatedShootDays})))}else ea("error"),eg(e.error||"Could not analyze script");ee(!1)},e=>{ea("error"),eg(e),ee(!1)})}catch(e){ea("error"),eg("Error reading PDF"),ee(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f] text-white overflow-hidden",children:[(0,t.jsx)("input",{ref:eb,type:"file",accept:"application/pdf",onChange:eN,className:"hidden"}),"landing"!==i&&"results"!==i&&(0,t.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50",children:[(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress-fill",style:{width:`${(s=["landing","script","context","assumptions","complexity","politics","processing","results"]).indexOf(i)/(s.length-1)*100}%`}})}),(0,t.jsxs)("div",{className:"flex justify-between px-6 py-3 text-xs text-gray-500 uppercase tracking-widest",children:[(0,t.jsx)("span",{children:"The Script Oracle"}),(0,t.jsxs)("span",{children:["Step ",["script","context","assumptions","complexity","politics"].indexOf(i)+1," of 5"]})]})]}),(0,t.jsx)("main",{className:`${"next"===f?"slide-right":"slide-left"}`,children:(()=>{switch(i){case"landing":return(0,t.jsx)(eo,{onStart:()=>b("script"),currentQuote:G});case"script":return(0,t.jsx)(en,{pdfLoading:Q,pdfStatus:et,aiBreakdown:es,extractionError:em,scriptText:K.scriptText||"",analysisLogs:ex,onScriptChange:e=>V(t=>({...t,scriptText:e})),onUploadClick:()=>eb.current?.click(),onFileDrop:e=>{let t=new DataTransfer;t.items.add(e),eb.current&&(eb.current.files=t.files),eN({target:{files:t.files}})},onNext:ef,onBack:ev});case"context":return(0,t.jsx)(el,{input:K,onUpdate:e=>V(t=>({...t,...e})),onNext:ef,onBack:ev});case"assumptions":return(0,t.jsx)(ed,{assumptions:Z,onUpdate:J,onNext:ef,onBack:ev});case"complexity":return(0,t.jsx)(ec,{complexity:K.complexity,aiBreakdown:es,onUpdate:e=>V(t=>({...t,complexity:e})),onNext:ef,onBack:ev});case"politics":return(0,t.jsx)(eu,{politics:K.politics,onUpdate:e=>V(t=>({...t,politics:e})),onNext:ef,onBack:ev});case"processing":return(0,t.jsx)(ep,{});case"results":return(0,t.jsx)(eh,{output:Y,input:K,producerAssumptions:Z,onRestart:()=>{V(W()),_(null),er(null),b("landing")}})}})()})]})}function eo({onStart:e,currentQuote:a}){return(0,t.jsxs)("div",{className:"wizard-step items-center text-center relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 w-[600px] h-[600px] rounded-full opacity-20 pointer-events-none",style:{background:"radial-gradient(circle, rgba(201,162,39,0.15) 0%, transparent 70%)"}}),(0,t.jsxs)("div",{className:"relative z-10 max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-10",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto rounded-2xl flex items-center justify-center mb-6",style:{background:"linear-gradient(135deg, rgba(201,162,39,0.2) 0%, rgba(201,162,39,0.05) 100%)",border:"1px solid rgba(201,162,39,0.3)"},children:(0,t.jsx)(ee,{className:"w-8 h-8 text-amber-400"})}),(0,t.jsxs)("h1",{className:"text-5xl md:text-7xl font-light tracking-tight mb-4",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"The"})," ",(0,t.jsx)("span",{className:"gradient-text font-medium",children:"Script Oracle"})]}),(0,t.jsx)("p",{className:"text-lg md:text-xl text-gray-500 font-light tracking-wide",children:"AI-powered production feasibility"})]}),(0,t.jsx)("div",{className:"h-32 flex items-center justify-center mb-12 max-w-2xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"quote-fade",children:[(0,t.jsxs)("p",{className:"text-xl md:text-2xl text-gray-300 font-light leading-relaxed film-quote",children:['"',ei[a].text,'"']}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-4 uppercase tracking-[0.2em]",children:ei[a].film})]},a)}),(0,t.jsx)("button",{onClick:e,className:"btn-primary text-base px-10 py-5",children:"Start Assessment"}),(0,t.jsx)("p",{className:"mt-10 text-sm text-gray-600 tracking-wide",children:"Know before you commit"})]})]})}function en({pdfLoading:e,pdfStatus:s,aiBreakdown:i,extractionError:r,scriptText:o,analysisLogs:n,onScriptChange:l,onUploadClick:d,onFileDrop:c,onNext:u,onBack:p}){let h,[m,g]=(0,a.useState)(!1),x=(0,a.useRef)(null);return(0,a.useEffect)(()=>{x.current&&x.current.scrollIntoView({behavior:"smooth"})},[n]),(0,t.jsxs)("div",{className:"wizard-step max-w-2xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)("span",{className:"step-counter",children:"Step 1 of 5"})}),(0,t.jsx)("h2",{className:"text-3xl md:text-4xl font-light mb-3 tracking-tight",children:"Upload your script"}),(0,t.jsx)("p",{className:"text-gray-500 mb-8 text-base leading-relaxed",children:"We'll analyze it for locations, setups, VFX, and talent requirements."}),(0,t.jsx)("div",{className:`drop-zone mb-6 ${m?"drag-over":""}`,onClick:d,onDragOver:e=>{e.preventDefault(),g(!0)},onDragLeave:()=>{g(!1)},onDrop:e=>{e.preventDefault(),g(!1);let t=e.dataTransfer.files?.[0];t&&c(t)},children:e&&"extracting"===s?(0,t.jsxs)("div",{className:"flex flex-col items-center py-4",children:[(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)(es,{className:"w-10 h-10 text-amber-400 animate-spin"}),(0,t.jsx)("div",{className:"absolute inset-0 pulse-gold rounded-full"})]}),(0,t.jsx)("p",{className:"text-base text-amber-400 font-medium",children:"Reading PDF..."}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Extracting text from pages"})]}):e&&"analyzing"===s?(0,t.jsxs)("div",{className:"flex flex-col items-center py-4",children:[(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)(es,{className:"w-10 h-10 text-amber-400 animate-spin"}),(0,t.jsx)("div",{className:"absolute inset-0 pulse-gold rounded-full"})]}),(0,t.jsx)("p",{className:"text-base text-amber-400 font-medium",children:"Analyzing with AI..."})]}):i?.breakdown?(0,t.jsxs)("div",{className:"flex flex-col items-center py-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-500/10 flex items-center justify-center mb-4",children:(0,t.jsx)(ea,{className:"w-6 h-6 text-green-400"})}),(0,t.jsx)("p",{className:"text-base text-green-400 font-medium",children:"Analysis complete"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[i.breakdown.totalScenes," scenes â€¢ ",i.breakdown.rollup?.estimatedShootDays," days"]})]}):r?(0,t.jsxs)("div",{className:"flex flex-col items-center py-4 px-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center mb-4",children:(0,t.jsx)(et,{className:"w-6 h-6 text-red-400"})}),(0,t.jsx)("p",{className:"text-base text-red-400 text-center",children:(h=r.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim()).toLowerCase().includes("inactivity timeout")||h.toLowerCase().includes("timeout")?"Upload timed out. Please try again.":h.toLowerCase().includes("bad gateway")||h.toLowerCase().includes("502")?"Server error. Please try again in a moment.":h.length>200?"Something went wrong. Please try again or paste text instead.":h||"Something went wrong. Please try again."}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Paste text below instead"})]}):(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center mx-auto mb-5",children:(0,t.jsx)(_,{className:"w-7 h-7 text-gray-500"})}),(0,t.jsx)("p",{className:"text-base text-gray-300 mb-1 font-medium",children:"Drop PDF or click to browse"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Scripts, treatments, board decks"})]})}),e&&n.length>0&&(0,t.jsxs)("div",{className:"card-dark mb-6 max-h-48 overflow-y-auto",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-widest mb-3",children:"Analysis Progress"}),(0,t.jsxs)("div",{className:"space-y-2",children:[n.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[e.startsWith("âœ“")?(0,t.jsx)(ea,{className:"w-4 h-4 text-green-400 flex-shrink-0"}):(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-400 flex-shrink-0"}),(0,t.jsx)("span",{className:e.startsWith("âœ“")?"text-gray-300":"text-gray-400",children:e})]},a)),(0,t.jsx)("div",{ref:x})]})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)("div",{className:"flex-1 h-px bg-white/5"}),(0,t.jsx)("span",{className:"text-xs text-gray-600 uppercase tracking-widest",children:"Or paste text"}),(0,t.jsx)("div",{className:"flex-1 h-px bg-white/5"})]}),(0,t.jsx)("textarea",{value:o,onChange:e=>l(e.target.value),placeholder:"Paste your script here...",className:"input-dark h-36 font-mono text-sm resize-none"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("button",{onClick:p,className:"btn-secondary",children:[(0,t.jsx)(Q,{className:"w-4 h-4 inline mr-2"})," Back"]}),(0,t.jsxs)("button",{onClick:u,className:"btn-primary",disabled:e,children:["Continue ",(0,t.jsx)(J,{className:"w-4 h-4 inline ml-2"})]})]})]})}function el({input:e,onUpdate:a,onNext:s,onBack:i}){return(0,t.jsxs)("div",{className:"wizard-step max-w-2xl mx-auto",children:[(0,t.jsx)("h2",{className:"text-4xl md:text-5xl font-light mb-12",children:"Where are you shooting?"}),(0,t.jsx)("div",{className:"mb-12",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>a({shootingContext:"UK"}),className:`toggle-btn flex-1 py-6 text-lg ${"UK"===e.shootingContext?"active":""}`,children:"UK"}),(0,t.jsx)("button",{onClick:()=>a({shootingContext:"EU"}),className:`toggle-btn flex-1 py-6 text-lg ${"EU"===e.shootingContext?"active":""}`,children:"EU"})]})}),"EU"===e.shootingContext&&(0,t.jsxs)("div",{className:"mb-12 animate-fadeIn",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-3 uppercase tracking-widest",children:"Which country?"}),(0,t.jsxs)("select",{value:e.euCountry,onChange:e=>a({euCountry:e.target.value}),className:"input-dark",children:[(0,t.jsx)("option",{value:"EU_Average",children:"EU Average"}),(0,t.jsx)("option",{value:"Poland",children:"Poland"}),(0,t.jsx)("option",{value:"Bulgaria",children:"Bulgaria"}),(0,t.jsx)("option",{value:"Czech",children:"Czech Republic"}),(0,t.jsx)("option",{value:"Serbia",children:"Serbia"}),(0,t.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,t.jsx)("option",{value:"Spain",children:"Spain"}),(0,t.jsx)("option",{value:"Portugal",children:"Portugal"})]})]}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4 uppercase tracking-widest",children:"Where will this air?"}),(0,t.jsx)("div",{className:"flex gap-4",children:["UK","US","Worldwide"].map(s=>(0,t.jsx)("button",{onClick:()=>a({usageTerritory:s}),className:`toggle-btn flex-1 py-4 ${e.usageTerritory===s?"active":""}`,children:s},s))})]}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4 uppercase tracking-widest",children:"Usage term?"}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)("input",{type:"range",min:"1",max:"3",value:e.usageTerm,onChange:e=>a({usageTerm:parseInt(e.target.value)}),className:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-amber-500"}),(0,t.jsxs)("span",{className:"text-2xl text-amber-400 font-medium w-24",children:[e.usageTerm," year",e.usageTerm>1?"s":""]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("button",{onClick:i,className:"btn-secondary",children:[(0,t.jsx)(Q,{className:"w-5 h-5 inline mr-1"})," Back"]}),(0,t.jsxs)("button",{onClick:s,className:"btn-primary",children:["Continue ",(0,t.jsx)(J,{className:"w-5 h-5 inline ml-1"})]})]})]})}function ed({assumptions:e,onUpdate:a,onNext:s,onBack:i}){return(0,t.jsxs)("div",{className:"wizard-step max-w-2xl mx-auto",children:[(0,t.jsx)("h2",{className:"text-4xl md:text-5xl font-light mb-4",children:"What are you assuming?"}),(0,t.jsx)("p",{className:"text-gray-400 mb-12 text-lg",children:"We'll compare your assumptions against what the script actually needs."}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4 uppercase tracking-widest",children:"Do you have budget indication?"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>a({...e,hasBudgetIndication:!0}),className:`toggle-btn flex-1 py-4 ${e.hasBudgetIndication?"active":""}`,children:"Yes"}),(0,t.jsx)("button",{onClick:()=>a({...e,hasBudgetIndication:!1,totalBudget:void 0}),className:`toggle-btn flex-1 py-4 ${!e.hasBudgetIndication?"active":""}`,children:"No indication"})]})]}),e.hasBudgetIndication&&(0,t.jsxs)("div",{className:"mb-12 animate-fadeIn",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-3 uppercase tracking-widest",children:"Client's budget"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-lg",children:"Â£"}),(0,t.jsx)("input",{type:"number",value:e.totalBudget||"",onChange:t=>a({...e,totalBudget:parseInt(t.target.value)||void 0}),placeholder:"300000",className:"input-dark pl-10"})]})]}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-3 uppercase tracking-widest",children:"How many shoot days?"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>a({...e,shootDays:Math.max(1,e.shootDays-1)}),className:"w-12 h-12 rounded-lg bg-white/5 border border-white/10 text-2xl hover:bg-white/10 transition-colors",children:"âˆ’"}),(0,t.jsx)("span",{className:"text-4xl font-light text-amber-400 w-20 text-center",children:e.shootDays}),(0,t.jsx)("button",{onClick:()=>a({...e,shootDays:e.shootDays+1}),className:"w-12 h-12 rounded-lg bg-white/5 border border-white/10 text-2xl hover:bg-white/10 transition-colors",children:"+"})]})]}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-3 uppercase tracking-widest",children:"Post budget estimate"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-lg",children:"Â£"}),(0,t.jsx)("input",{type:"number",value:e.postBudget,onChange:t=>a({...e,postBudget:parseInt(t.target.value)||0}),className:"input-dark pl-10"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("button",{onClick:i,className:"btn-secondary",children:[(0,t.jsx)(Q,{className:"w-5 h-5 inline mr-1"})," Back"]}),(0,t.jsxs)("button",{onClick:s,className:"btn-primary",children:["Continue ",(0,t.jsx)(J,{className:"w-5 h-5 inline ml-1"})]})]})]})}function ec({complexity:e,aiBreakdown:a,onUpdate:s,onNext:i,onBack:r}){let o=t=>{s({...e,[t]:!e[t]})},n=[];return a?.breakdown?.rollup?.hasTechnicalShots&&n.push({key:"technical",label:"Technical shots detected",description:"Motion control or high-speed"}),a?.breakdown?.rollup?.hasHeroProduct&&n.push({key:"heroProduct",label:"Hero product moment",description:"Signature product shot"}),a?.breakdown?.rollup?.vfxComplexity==="light"&&n.push({key:"vfxLight",label:"Light VFX",description:"Cleanup or simple compositing"}),a?.breakdown?.rollup?.vfxComplexity==="heavy"&&n.push({key:"vfxHeavy",label:"Heavy VFX",description:"CG elements or complex compositing"}),(0,t.jsxs)("div",{className:"wizard-step max-w-3xl mx-auto",children:[(0,t.jsx)("h2",{className:"text-4xl md:text-5xl font-light mb-4",children:"Complexity factors"}),(0,t.jsx)("p",{className:"text-gray-400 mb-8 text-lg",children:"Any of these apply to this production?"}),n.length>0&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("p",{className:"text-sm text-amber-400 mb-4 uppercase tracking-widest flex items-center gap-2",children:[(0,t.jsx)(ee,{className:"w-4 h-4"})," AI Detected"]}),(0,t.jsx)("div",{className:"grid gap-3",children:n.map(a=>(0,t.jsx)("button",{onClick:()=>o(a.key),className:`card-dark text-left transition-all ${e[a.key]?"border-amber-500/50 bg-amber-500/5":""}`,children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-white",children:a.label}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:a.description})]}),(0,t.jsx)("div",{className:`w-6 h-6 rounded border flex items-center justify-center transition-colors ${e[a.key]?"bg-amber-500 border-amber-500":"border-gray-600"}`,children:e[a.key]&&(0,t.jsx)(ea,{className:"w-4 h-4 text-black"})})]})},a.key))})]}),(0,t.jsx)("div",{className:"grid gap-3",children:[{key:"fixInPost",label:'"Fix it in post" mentality',description:"Team assumes everything can be saved in edit"},{key:"multipleHeroTalent",label:"Multiple hero talent",description:"More than 2 principal cast members"},{key:"specialEquipment",label:"Special equipment",description:"Crane, drone, gimbal, etc."},{key:"childrenInvolved",label:"Children on set",description:"Under 16s (hour restrictions apply)"},{key:"childrenUnder5",label:"Children under 5",description:"Most restrictive scheduling"}].map(a=>(0,t.jsx)("button",{onClick:()=>o(a.key),className:`card-dark text-left transition-all ${e[a.key]?"border-amber-500/50 bg-amber-500/5":""}`,children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-white",children:a.label}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:a.description})]}),(0,t.jsx)("div",{className:`w-6 h-6 rounded border flex items-center justify-center transition-colors ${e[a.key]?"bg-amber-500 border-amber-500":"border-gray-600"}`,children:e[a.key]&&(0,t.jsx)(ea,{className:"w-4 h-4 text-black"})})]})},a.key))}),(0,t.jsxs)("div",{className:"flex justify-between mt-12",children:[(0,t.jsxs)("button",{onClick:r,className:"btn-secondary",children:[(0,t.jsx)(Q,{className:"w-5 h-5 inline mr-1"})," Back"]}),(0,t.jsxs)("button",{onClick:i,className:"btn-primary",children:["Continue ",(0,t.jsx)(J,{className:"w-5 h-5 inline ml-1"})]})]})]})}function eu({politics:e,onUpdate:a,onNext:s,onBack:i}){return(0,t.jsxs)("div",{className:"wizard-step max-w-3xl mx-auto",children:[(0,t.jsx)("h2",{className:"text-4xl md:text-5xl font-light mb-4",children:"The politics"}),(0,t.jsx)("p",{className:"text-gray-400 mb-8 text-lg",children:"The uncomfortable questions..."}),(0,t.jsx)("div",{className:"grid gap-3",children:[{key:"numberBeforeBoardsLocked",label:"Number agreed before boards locked",description:"Budget committed before creative is finalized"},{key:"procurementInvolvedEarly",label:"Procurement involved early",description:"Finance team scrutinizing costs from day one"},{key:"multipleAgencyStakeholders",label:"Multiple agency stakeholders",description:"Account, creative, and planning all have input"},{key:"clientOnSet",label:"Client attending shoot",description:"Decision-maker will be on set (adds pressure)"}].map(s=>(0,t.jsx)("button",{onClick:()=>{var t;return t=s.key,void a({...e,[t]:!e[t]})},className:`card-dark text-left transition-all ${e[s.key]?"border-amber-500/50 bg-amber-500/5":""}`,children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-white",children:s.label}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:s.description})]}),(0,t.jsx)("div",{className:`w-6 h-6 rounded border flex items-center justify-center transition-colors ${e[s.key]?"bg-amber-500 border-amber-500":"border-gray-600"}`,children:e[s.key]&&(0,t.jsx)(ea,{className:"w-4 h-4 text-black"})})]})},s.key))}),(0,t.jsxs)("div",{className:"flex justify-between mt-12",children:[(0,t.jsxs)("button",{onClick:i,className:"btn-secondary",children:[(0,t.jsx)(Q,{className:"w-5 h-5 inline mr-1"})," Back"]}),(0,t.jsxs)("button",{onClick:s,className:"btn-primary",children:["Run Assessment ",(0,t.jsx)(J,{className:"w-5 h-5 inline ml-1"})]})]})]})}function ep(){return(0,t.jsxs)("div",{className:"wizard-step items-center text-center",children:[(0,t.jsx)(es,{className:"w-16 h-16 text-amber-400 animate-spin mb-8"}),(0,t.jsx)("h2",{className:"text-3xl font-light mb-4",children:"Analyzing your script..."}),(0,t.jsx)("p",{className:"text-gray-400",children:"Comparing assumptions against reality"})]})}function eh({output:e,input:a,producerAssumptions:s,onRestart:i}){if(!e)return null;let r="GREEN"===e.verdict?"verdict-green":"AMBER"===e.verdict?"verdict-amber":"verdict-red",o="GREEN"===e.verdict?"LOOKS ACHIEVABLE":"AMBER"===e.verdict?"PRESSURE POINTS IDENTIFIED":"SIGNIFICANT CHALLENGES";return(0,t.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f] text-white p-6 md:p-12",children:[(0,t.jsxs)("div",{className:"max-w-5xl mx-auto mb-12",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("h1",{className:"text-2xl font-light",children:["The ",(0,t.jsx)("span",{className:"text-amber-400",children:"Script Oracle"})]}),(0,t.jsx)("button",{onClick:i,className:"btn-secondary text-sm",children:"Start over"})]}),(0,t.jsxs)("div",{className:`p-8 rounded-2xl border ${r} text-center mb-12`,children:[(0,t.jsx)("p",{className:"text-sm uppercase tracking-widest mb-2 opacity-80",children:"Assessment"}),(0,t.jsx)("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:o}),(0,t.jsx)("p",{className:"text-lg opacity-90",children:e.verdictReason})]})]}),(0,t.jsxs)("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-8 mb-12",children:[(0,t.jsxs)("div",{className:"comparison-assumed rounded-xl p-6",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 uppercase tracking-widest mb-6",children:"What you assumed"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Shoot days"}),(0,t.jsx)("span",{className:"text-xl",children:s.shootDays})]}),s.hasBudgetIndication&&s.totalBudget&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Client budget"}),(0,t.jsx)("span",{className:"text-xl",children:z(s.totalBudget)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Post budget"}),(0,t.jsx)("span",{className:"text-xl",children:z(s.postBudget)})]})]})]}),(0,t.jsxs)("div",{className:"comparison-reality rounded-xl p-6",children:[(0,t.jsx)("p",{className:"text-sm text-amber-400 uppercase tracking-widest mb-6",children:"Script reality"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Recommended days"}),(0,t.jsx)("span",{className:"text-xl text-amber-400",children:e.recommendedShootDays})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Production band"}),(0,t.jsxs)("span",{className:"text-xl text-amber-400",children:[z(e.productionCost.totalProduction.lean)," - ",z(e.productionCost.totalProduction.ambitious)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Post minimum"}),(0,t.jsx)("span",{className:"text-xl text-amber-400",children:z(e.postProduction.minimum)})]})]})]})]}),(0,t.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"card-dark mb-8",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 uppercase tracking-widest mb-4",children:"Summary"}),(0,t.jsx)("p",{className:"text-lg leading-relaxed",children:e.copyReadySummary})]}),e.whatToChallenge.length>0&&(0,t.jsxs)("div",{className:"card-dark mb-8",children:[(0,t.jsx)("p",{className:"text-sm text-amber-400 uppercase tracking-widest mb-4",children:"What to challenge first"}),(0,t.jsx)("ul",{className:"space-y-2",children:e.whatToChallenge.map((e,a)=>(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"text-amber-400 mt-1",children:"â—†"}),(0,t.jsx)("span",{children:e})]},a))})]}),e.producerSummary?.technical&&e.producerSummary.technical.length>0&&(0,t.jsxs)("div",{className:"card-dark mb-8",children:[(0,t.jsx)("p",{className:"text-sm text-blue-400 uppercase tracking-widest mb-4",children:"Technical Breakdown"}),(0,t.jsx)("ul",{className:"space-y-2",children:e.producerSummary.technical.map((e,a)=>(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"text-blue-400 mt-1",children:"â€º"}),(0,t.jsx)("span",{className:"text-gray-300",children:e})]},a))})]}),e.producerSummary?.risks&&e.producerSummary.risks.length>0&&(0,t.jsxs)("div",{className:"card-dark mb-8 border-l-4 border-red-500",children:[(0,t.jsx)("p",{className:"text-sm text-red-400 uppercase tracking-widest mb-4",children:"Risk Factors"}),(0,t.jsx)("ul",{className:"space-y-2",children:e.producerSummary.risks.map((e,a)=>(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"text-red-400 mt-1",children:"!"}),(0,t.jsx)("span",{className:"text-gray-300",children:e})]},a))})]}),e.producerSummary?.checklist&&e.producerSummary.checklist.length>0&&(0,t.jsxs)("div",{className:"card-dark mb-8 border-l-4 border-amber-500",children:[(0,t.jsx)("p",{className:"text-sm text-amber-400 uppercase tracking-widest mb-4",children:"Producer Checklist"}),(0,t.jsx)("ul",{className:"space-y-2",children:e.producerSummary.checklist.map((e,a)=>(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"text-amber-400 mt-1",children:"â–¡"}),(0,t.jsx)("span",{className:"text-gray-300",children:e})]},a))})]}),(0,t.jsxs)("button",{onClick:()=>navigator.clipboard.writeText(e.copyReadySummary),className:"btn-gold w-full",children:[(0,t.jsx)(Z,{className:"w-5 h-5 inline mr-2"})," Copy summary to clipboard"]})]})]})}e.s(["default",()=>er],52683)}]);